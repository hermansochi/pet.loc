var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,o=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&u(e,r,t[r]);if(n)for(var r of n(t))s.call(t,r)&&u(e,r,t[r]);return e},c=(e,n)=>t(e,r(n));import{coreModule as a,buildCreateApi as d}from"@reduxjs/toolkit/query";import{createSelector as l}from"@reduxjs/toolkit";import{useCallback as p,useDebugValue as f,useEffect as y,useLayoutEffect as m,useMemo as b,useRef as v,useState as h}from"react";import{QueryStatus as g,skipToken as S}from"@reduxjs/toolkit/query";import{shallowEqual as O}from"react-redux";import{useEffect as Q,useRef as x,useMemo as q}from"react";function z(e,t,r,n){const i=q((()=>({queryArgs:e,serialized:"object"==typeof e?t({queryArgs:e,endpointDefinition:r,endpointName:n}):e})),[e,t,r,n]),s=x(i);return Q((()=>{s.current.serialized!==i.serialized&&(s.current=i)}),[i]),s.current.serialized===i.serialized?s.current.queryArgs:e}var L=Symbol();import{useEffect as j,useRef as E}from"react";import{shallowEqual as R}from"react-redux";function k(e){const t=E(e);return j((()=>{R(t.current,e)||(t.current=e)}),[e]),R(t.current,e)?t.current:e}var A,w,I="undefined"!=typeof window&&window.document&&window.document.createElement?m:y,D=e=>e,P=e=>e,F=e=>e.isUninitialized?c(o({},e),{isUninitialized:!1,isFetching:!0,isLoading:void 0===e.data,status:g.pending}):e;function C(e){return e.replace(e[0],e[0].toUpperCase())}function M(e,...t){Object.assign(e,...t)}(w=A||(A={})).query="query",w.mutation="mutation";import{useDispatch as N,useSelector as K,useStore as _,batch as H}from"react-redux";var U=Symbol(),$=({batch:e=H,useDispatch:t=N,useSelector:r=K,useStore:n=_,unstable__sideEffectsInRender:i=!1}={})=>({name:U,init(s,{serializeQueryArgs:u},a){const d=s,{buildQueryHooks:m,buildMutationHook:g,usePrefetch:Q}=function({api:e,moduleOptions:{batch:t,useDispatch:r,useSelector:n,useStore:i,unstable__sideEffectsInRender:s},serializeQueryArgs:u,context:a}){const d=s?e=>e():y;return{buildQueryHooks:function(s){const g=(t,{refetchOnReconnect:i,refetchOnFocus:o,refetchOnMountOrArgChange:c,skip:l=!1,pollingInterval:p=0}={})=>{const{initiate:f}=e.endpoints[s],m=r(),h=z(l?S:t,u,a.endpointDefinitions[s],s),g=k({refetchOnReconnect:i,refetchOnFocus:o,pollingInterval:p}),O=v();let{queryCacheKey:Q,requestId:x}=O.current||{};const q=n((t=>{var r;return!!Q&&!!x&&!(null==(r=t[e.reducerPath].subscriptions[Q])?void 0:r[x])}));return d((()=>{O.current=void 0}),[q]),d((()=>{var e;const t=O.current;if(h===S)return null==t||t.unsubscribe(),void(O.current=void 0);const r=null==(e=O.current)?void 0:e.subscriptionOptions;if(t&&t.arg===h)g!==r&&t.updateSubscriptionOptions(g);else{null==t||t.unsubscribe();const e=m(f(h,{subscriptionOptions:g,forceRefetch:c}));O.current=e}}),[m,f,c,h,g,q]),y((()=>()=>{var e;null==(e=O.current)||e.unsubscribe(),O.current=void 0}),[]),b((()=>({refetch:()=>{var e;null==(e=O.current)||e.refetch()}})),[])},Q=({refetchOnReconnect:n,refetchOnFocus:i,pollingInterval:u=0}={})=>{const{initiate:o}=e.endpoints[s],c=r(),[a,l]=h(L),f=v(),m=k({refetchOnReconnect:n,refetchOnFocus:i,pollingInterval:u});d((()=>{var e,t;const r=null==(e=f.current)?void 0:e.subscriptionOptions;m!==r&&(null==(t=f.current)||t.updateSubscriptionOptions(m))}),[m]);const g=v(m);d((()=>{g.current=m}),[m]);const S=p((function(e,r=!1){let n;return t((()=>{var t;null==(t=f.current)||t.unsubscribe(),f.current=n=c(o(e,{subscriptionOptions:g.current,forceRefetch:!r})),l(e)})),n}),[c,o]);return y((()=>()=>{var e;null==(e=null==f?void 0:f.current)||e.unsubscribe()}),[]),y((()=>{a===L||f.current||S(a,!0)}),[a,S]),b((()=>[S,a]),[S,a])},x=(t,{skip:r=!1,selectFromResult:o=D}={})=>{const{select:c}=e.endpoints[s],d=z(r?S:t,u,a.endpointDefinitions[s],s),p=v(),f=b((()=>l([c(d),(e,t)=>t,e=>d],m)),[c,d]),y=b((()=>l([f],o)),[f,o]),h=n((e=>y(e,p.current)),O),g=i(),Q=f(g.getState(),p.current);return I((()=>{p.current=Q}),[Q]),h};return{useQueryState:x,useQuerySubscription:g,useLazyQuerySubscription:Q,useLazyQuery(e){const[t,r]=Q(e),n=x(r,c(o({},e),{skip:r===L})),i=b((()=>({lastArg:r})),[r]);return b((()=>[t,n,i]),[t,n,i])},useQuery(e,t){const r=g(e,t),n=x(e,o({selectFromResult:e===S||(null==t?void 0:t.skip)?void 0:F},t)),{data:i,status:s,isLoading:u,isSuccess:c,isError:a,error:d}=n;return f({data:i,status:s,isLoading:u,isSuccess:c,isError:a,error:d}),b((()=>o(o({},n),r)),[n,r])}}},buildMutationHook:function(i){return({selectFromResult:s=P,fixedCacheKey:u}={})=>{const{select:a,initiate:d}=e.endpoints[i],m=r(),[v,g]=h();y((()=>()=>{(null==v?void 0:v.arg.fixedCacheKey)||null==v||v.reset()}),[v]);const S=p((function(e){const t=m(d(e,{fixedCacheKey:u}));return g(t),t}),[m,d,u]),{requestId:Q}=v||{},x=b((()=>l([a({fixedCacheKey:u,requestId:null==v?void 0:v.requestId})],s)),[a,v,s,u]),q=n(x,O),z=null==u?null==v?void 0:v.arg.originalArgs:void 0,L=p((()=>{t((()=>{v&&g(void 0),u&&m(e.internalActions.removeMutationResult({requestId:Q,fixedCacheKey:u}))}))}),[m,u,v,Q]),{endpointName:j,data:E,status:R,isLoading:k,isSuccess:A,isError:w,error:I}=q;f({endpointName:j,data:E,status:R,isLoading:k,isSuccess:A,isError:w,error:I});const D=b((()=>c(o({},q),{originalArgs:z,reset:L})),[q,z,L]);return b((()=>[S,D]),[S,D])}},usePrefetch:function(t,n){const i=r(),s=k(n);return p(((r,n)=>i(e.util.prefetch(t,r,o(o({},s),n)))),[t,i,s])}};function m(e,t,r){if((null==t?void 0:t.endpointName)&&e.isUninitialized){const{endpointName:e}=t,n=a.endpointDefinitions[e];u({queryArgs:t.originalArgs,endpointDefinition:n,endpointName:e})===u({queryArgs:r,endpointDefinition:n,endpointName:e})&&(t=void 0)}let n=e.isSuccess?e.data:null==t?void 0:t.data;void 0===n&&(n=e.data);const i=void 0!==n,s=e.isLoading,d=!i&&s,l=e.isSuccess||s&&i;return c(o({},e),{data:n,currentData:e.data,isFetching:s,isLoading:d,isSuccess:l})}}({api:s,moduleOptions:{batch:e,useDispatch:t,useSelector:r,useStore:n,unstable__sideEffectsInRender:i},serializeQueryArgs:u,context:a});return M(d,{usePrefetch:Q}),M(a,{batch:e}),{injectEndpoint(e,t){if(t.type===A.query){const{useQuery:t,useLazyQuery:r,useLazyQuerySubscription:n,useQueryState:i,useQuerySubscription:u}=m(e);M(d.endpoints[e],{useQuery:t,useLazyQuery:r,useLazyQuerySubscription:n,useQueryState:i,useQuerySubscription:u}),s[`use${C(e)}Query`]=t,s[`useLazy${C(e)}Query`]=r}else if(t.type===A.mutation){const t=g(e);M(d.endpoints[e],{useMutation:t}),s[`use${C(e)}Mutation`]=t}}}}});export*from"@reduxjs/toolkit/query";import{configureStore as B}from"@reduxjs/toolkit";import{useEffect as G}from"react";import J from"react";import{Provider as T}from"react-redux";import{setupListeners as V}from"@reduxjs/toolkit/query";function W(e){const[t]=J.useState((()=>B({reducer:{[e.api.reducerPath]:e.api.reducer},middleware:t=>t().concat(e.api.middleware)})));return G((()=>!1===e.setupListeners?void 0:V(t.dispatch,e.setupListeners)),[e.setupListeners]),J.createElement(T,{store:t,context:e.context},e.children)}var X=d(a(),$());export{W as ApiProvider,X as createApi,$ as reactHooksModule};
//# sourceMappingURL=rtk-query-react.modern.production.min.js.map